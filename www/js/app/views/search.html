<!-- 
  This file is part of VertNet: https://github.com/VertNet/webapp

  VertNet is free software: you can redistribute it and/or modify
  it under the terms of the GNU General Public License as published by
  the Free Software Foundation, either version 3 of the License, or
  (at your option) any later version.

  VertNet is distributed in the hope that it will be useful,
  but WITHOUT ANY WARRANTY; without even the implied warranty of
  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
  GNU General Public License for more details.

  You should have received a copy of the GNU General Public License
  along with Foobar.  If not, see: http://www.gnu.org/licenses

  This is the App Engine configuration file for local development.
  Note that static assets are sources from www/ which contains full
  sourcecode without minification. 
-->
<div id="explore-page-content" class="container">
  <div class="search-spinner"></div>    
  <div class="page-header">
    <h1>Search <small>VertNet</small></h1>
  </div>
<!--    <p class="lead">Help us create a plan for VertNet's future. Take our <a href="http://www.vertnet.org/feedback/sustainabilitysurvey.html" target="_blank" title="VertNet Sustainability Survey">Sustainability Survey</a>&nbsp;<small><b class="glyphicon glyphicon-share-alt"></b></small>.</p>
 -->  <div id="whoops" class="alert fade in">
    <button type="button" class="close" data-dismiss="alert">×</button>
    Search is a little slow right now. Automatically retrying ...
  </div>
  <div id="search-form">
    <div class="row">
     <div class="col-lg-11">
      <div id="search-keywords-div">
        <input id="search-keywords-box" type="text" placeholder="full text record search...">
        <a id="show-search-options" href="#">
          <span id="search-carat" class="caretAdvanced"><h7 class="small">More search options</h7></span>
        </a>
      </input>
    </div>            
    <div id="advanced-search-form">
      <button id="close-advanced-search" type="button" class="close" data-dismiss="alert">×</button>
      <legend>Search options</legend>
      Find occurrences with...<p>

      <form class="form-horizontal" role="form">
        <div id="filters">

          <div class="form-group">
            <label class="col-lg-2 control-label">These filters</label>
            <div class="vncheckbox">
              <label class="col-md-2">
                <input id="tissue" type="checkbox"> Has tissues
              </label>
              <label class="col-md-2">
                <input id="media" type="checkbox"> Has media
              </label>
              <label class="col-md-2">
                <input id="hastypestatus" type="checkbox"> Has type status
              </label>
              <label class="col-md-2">
                <input id="mappable" type="checkbox"> Is mappable
              </label>
              <label class="col-md-2">
                <input id="spatialfilter" type="checkbox"> In circle on map
              </label>                                          
            </div>
          </div>

        </div>

        <div id="spatialsearch">
          <div>
            <div>
              <a class="accordion-toggle collapsed" data-toggle="collapse" data-parent="#accordion2" href="#collapseOne">
              </a>
            </div>
            <div id="collapseOne" class="accordion-body collapse" style="height: 0px;">
              <div class="accordion-inner">
                <div id="searchmap"></div>
              </div>
            </div>
          </div>
        </div>

        <div class="form-group">
          <label class="col-lg-2 control-label">All these words</label>
          <div class="col-lg-10">
            <input type="text" class="form-control" id="allwords" placeholder="mvz grinnell">
          </div>
        </div>

        <div class="form-group">
          <label class="col-lg-2 control-label">Exact phrase</label>
          <div class="col-lg-10">
            <input type="text" class="form-control" id="exactphrase" placeholder='"butorides virescens"'>
          </div>
        </div>                

        <div class="form-group">
          <label class="col-lg-2 control-label">Any of these words</label>
          <div class="col-lg-10">
            <input type="text" class="form-control" id="anywords" placeholder='tissue OR preserved'>
          </div>
        </div>

        <div class="form-group">
          <label class="col-lg-2 control-label">None of these words</label>
          <div class="col-lg-10">
            <input type="text" class="form-control" id="nonewords" placeholder='NOT bufo NOT california'>
          </div>
        </div>
        
        <div class="form-group">
          <label class="col-lg-2 control-label">Record type</label>
          <div class="col-lg-10">
            <select class="form-control" id="recordtype">
              <option value="Any type">Any type</option>
              <option>Specimen</option>
              <option>Observation</option>
              <option>Specimen or Observation</option>
            </select>
          </div>
        </div>

        <div id="dwcterm">
          <div class="form-group">
            <label class="col-md-2 control-label">Darwin Core terms</label>
              <div class="col-md-2">
                <input id="institutioncode" class="form-control" type="text" placeholder="InstitutionCode">
              </div>
              <div class="col-md-2">
                <input id="catalognumber" class="form-control" type="text" placeholder="CatalogNumber">
              </div>
              <div class="col-md-2">
                <input id="recordedby" class="form-control" type="text" placeholder="RecordedBy">
              </div>                        
            </div>

            <div class="form-group">
              <label class="col-md-2 control-label"></label>
              <div class="col-md-2">
                <input id="class" class="form-control" type="text" placeholder="Class">
              </div>
              <div class="col-md-2">
                <input id="genus" class="form-control" type="text" placeholder="Genus">
              </div>
              <div class="col-md-2">
                <input id="specificepithet" class="form-control" type="text" placeholder="SpecificEpithet">
              </div>            
            </div>

            <div class="form-group">
              <label class="col-md-2 control-label"></label>
                <div class="col-md-2">
                  <input id="country" class="form-control" type="text" placeholder="Country">
                </div>
                <div class="col-md-2">
                  <input id="stateprovince" class="form-control" type="text" placeholder="StateProvince">
                </div>
                <div class="col-md-2">
                  <input id="county" class="form-control" type="text" placeholder="County">
                </div>
            </div>
            
          </div> 

        <div class="form-group">
          <label class="col-md-2 control-label">Years ranging from</label>
          <div class="col-md-2">
            <input class="form-control" type="text" id="datestart" placeholder='1888'>
          </div>
          <div id="dateto" class="col-md-0">
                 to
          </div>
          <div class="col-md-2">
            <input class="form-control" type="text" id="dateend" placeholder='1922'>
          </div>
        </div>

        <div class="form-group">
          <label class="col-lg-2 control-label">Sorted by</label>
          <div class="col-lg-10">
            <select class="form-control" id="sort">
              <option value="No sort">No sort</option>
              <option>InstitutionCode</option>
              <option>CatalogNumber</option>
              <option>Class</option>
              <option>Genus</option>
              <option>SpecificEpithet</option>
              <option>Country</option>
              <option>StateProvince</option>
              <option>County</option>
              <option>Year</option>
              <option>RecordedBy</option>
            </select>
          </div>
        </div>
        <div class="form-group">
          <div class="col-lg-10">
            <button id="search-button-advanced" type="button" class="btn btn-large btn-primary">
              <span class="glyphicon glyphicon-search icon-white"></span>
            </button>
          </div>
        </div>
      </form>
      <div class="spacer"></div>
    </div>
  </div>
  <div class="col-lg-1">
    <button id="search-button" type="button" class="btn btn-large btn-primary">
      <span class="glyphicon glyphicon-search icon-white"></span>
    </button>
  </div>
</div>
</div>

<div style="visibility:hidden" id="spatial-search-control">
  <div class="control-group">
    <label class="checkbox">
      <input id="spatial-label" type="checkbox"> <strong>Spatial search</strong>
    </label>
  </div>
</div>

<div style="visibility:hidden" id="load-more-control">
  <button id="loadmore" type="button" class="btn btn-primary">Load more...</button>
</div>

<ul id="resultTabs" class="nav nav-tabs">
  <li class="active">
    <a id="tabletab" href="#table" data-toggle="tab">Table</a>
  </li>
  <li>
    <a id="maptab" href="#tablemap" data-toggle="tab">Map</a>
  </li>
</ul>

<div id="occ-search-tabs-content" class="tab-content">
  <div class="tab-pane fade in active" id="table">   
    <div class="row">
      <div class="col-md-1 col-md-offset-10">
        <span class="counter"></span>
      </div>
      <div class="col-md-1">
        <button type="button" class="btn btn-mini btn-success dl-btn" data-toggle="button">
         <span>Download</span></button>   
		&nbsp;
      </div>
    </div>

    <div id="click-row-tip" class="alert alert-success">
      <button type="button" class="close" data-dismiss="alert">×</button>
      <strong>Pro tip! </strong>Click on a table row to see the full occurrence details.
    </div>

    <table id="occTable" class="table table-striped table-hover search-results-hover">
      <thead>
        <tr>
          <th id="idcol">Identification</th>
          <th id="taxcol">Taxonomy</th>
          <th>Location</th>
          <th>Year</th>
          <th>Map</th>
          <th>Media</th>
        </tr>
      </thead>
      <tbody>
      </tbody>
    </table>
    
    <div id="bottom-pager" class="row">
      <div class="col-lg-6">
        <ul class="pager load-more">
          <li class="table-pager">
            <a href="#">Load more results...</a>
          </li>
        </ul>            
      </div>
    </div>
  </div>  

  <div class="tab-pane fade" id="tablemap">
     <div class="row">
      <div class="col-md-1 col-md-offset-10">
        <span class="counter"></span>
      </div>
      <div class="col-md-1">
        <button type="button" class="btn btn-mini btn-success dl-btn" data-toggle="button">
         <span class="glyphicon glyphicon-download"></span></button>   
      </div>
    </div>
    <div id="resultmap"></div>
  </div>
</div>

<div id="myModal" class="modal fade" tabindex="-1" role="dialog">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
        <h1 id="bigModalLabel">Download >10k records</h1>
        <h1 id="smallModalLabel">Download <span id="reccount"></span> records</h1>
      </div>
      <div id="confirmation" class="alert alert-success">Thanks! Your download request was received! We'll email <span id="dl-email"></span> as soon as it's ready.</div>
      <div id="queue" class="modal-body">
        <p id="queue-msg" class="lead">Your search results are big enough that we'll have to prepare them for download. Name your result set, give us your email, and we'll send you a download link to the file containing your search results as soon as it's ready.</p>
        <p id="instant-msg" class="lead">Your search results are ready for download right now. Just enter a filename and click the download button.</p>
        <form class="form-horizontal" role="form">
          <div id="name" class="form-group">
            <label class="col-lg-2 control-label">Filename</label>
            <div class="col-lg-10">
              <input id="nameval" type="text" class="form-control" id="inputEmail1" required>
            </div>
          </div>
          <div id="email" class="form-group">
            <label class="col-lg-2 control-label">Email</label>
            <div class="col-lg-10">
              <input id="emailval" type="email" class="form-control" id="inputEmail1" required>
            </div>
          </div>          
        </form>
      </div>
      <div class="modal-footer">
        <button id="submit-download-btn" class="btn btn-success">Download</button>
      </div>
    </div>
  </div>
</div>